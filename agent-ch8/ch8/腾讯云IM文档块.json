{
  "metadata": {
    "total_chunks": 12,
    "created_time": "2025-08-18 10:39:10",
    "source_file": "ch8/腾讯云IM群组系统完整文档.md"
  },
  "chunks": [
    {
      "title": "群组基础能力操作差异",
      "content": "### 群组基础能力操作差异\n\n不同类型的群组在基础能力操作上存在差异：\n\n| 群组类型 | 群主管理权限 | 群成员邀请权限 | 群资料修改权限 | 群消息接收模式 |\n|----------|-------------|-------------|-------------|-------------|\n| Work | 无群主概念，所有成员均可管理群组 | 所有成员均可邀请他人入群 | 所有成员均可修改群资料 | 推拉结合 |\n| Public | 群主具备完整管理权限 | 仅群主和管理员可邀请他人入群 | 仅群主和管理员可修改群资料 | 推拉结合 |\n| Meeting | 群主具备完整管理权限 | 仅群主和管理员可邀请他人入群 | 仅群主和管理员可修改群资料 | 推拉结合 |\n| AVChatRoom | 群主具备完整管理权限 | 仅群主和管理员可邀请他人入群 | 仅群主和管理员可修改群资料 | 仅推送模式 |\n| Community | 群主具备完整管理权限 | 支持权限组控制 | 支持权限组控制 | 推拉结合 |",
      "level": 3,
      "start_line": 97,
      "end_line": 108,
      "word_count": 470,
      "char_count": 982
    },
    {
      "title": "加群方式差异",
      "content": "### 加群方式差异\n\n| 群组类型 | 申请加群 | 邀请加群 | 自由进出 |\n|----------|----------|----------|----------|\n| Work | 不支持 | 支持 | 不支持 |\n| Public | 支持（需审批） | 支持 | 不支持 |\n| Meeting | 不支持 | 支持 | 不支持 |\n| AVChatRoom | 不支持 | 支持 | 支持 |\n| Community | 支持（需审批） | 支持 | 支持 |",
      "level": 3,
      "start_line": 109,
      "end_line": 118,
      "word_count": 239,
      "char_count": 375
    },
    {
      "title": "成员管理能力差异",
      "content": "### 成员管理能力差异\n\n| 群组类型 | 群成员上限 | 踢出群成员 | 禁言群成员 | 设置管理员 |\n|----------|-----------|-----------|-----------|-----------|\n| Work | 200（可扩展至6000） | 不支持 | 不支持 | 不支持 |\n| Public | 2000（可扩展至6000） | 支持 | 支持 | 支持 |\n| Meeting | 6000 | 支持 | 支持 | 支持 |\n| AVChatRoom | 无上限 | 支持 | 支持 | 支持 |\n| Community | 10万（最高100万） | 支持 | 支持 | 支持权限组 |",
      "level": 3,
      "start_line": 119,
      "end_line": 128,
      "word_count": 317,
      "char_count": 495
    },
    {
      "title": "群组限制差异",
      "content": "### 群组限制差异\n\n| 群组类型 | 群资料搜索 | 群成员资料对外展示 | 申请加群理由长度 |\n|----------|-----------|----------------|----------------|\n| Work | 不支持 | 不支持 | - |\n| Public | 支持 | 支持 | 120字节 |\n| Meeting | 不支持 | 支持 | - |\n| AVChatRoom | 不支持 | 支持 | - |\n| Community | 支持 | 支持 | 120字节 |",
      "level": 3,
      "start_line": 129,
      "end_line": 138,
      "word_count": 253,
      "char_count": 373
    },
    {
      "title": "消息能力差异",
      "content": "### 消息能力差异\n\n| 群组类型 | 历史消息存储 | 离线推送 | 消息漫游 | 消息回调 |\n|----------|-------------|----------|----------|----------|\n| Work | 支持 | 支持 | 支持 | 支持 |\n| Public | 支持 | 支持 | 支持 | 支持 |\n| Meeting | 支持 | 支持 | 支持 | 支持 |\n| AVChatRoom | 不支持 | 不支持 | 不支持 | 支持 |\n| Community | 支持 | 支持 | 支持 | 支持 |",
      "level": 3,
      "start_line": 139,
      "end_line": 148,
      "word_count": 274,
      "char_count": 416
    },
    {
      "title": "批量导入与自动回收差异",
      "content": "### 批量导入与自动回收差异\n\n| 群组类型 | 支持批量导入 | 自动回收 |\n|----------|-------------|----------|\n| Work | 支持 | 群组没有活跃成员超过一定时间后自动回收 |\n| Public | 支持 | 群组没有活跃成员超过一定时间后自动回收 |\n| Meeting | 支持 | 群组没有活跃成员超过一定时间后自动回收 |\n| AVChatRoom | 不支持 | 群组创建后40天内无人发言将被自动解散 |\n| Community | 支持 | 群组没有活跃成员超过一定时间后自动回收 |\n\n## 群组数据结构介绍",
      "level": 3,
      "start_line": 149,
      "end_line": 160,
      "word_count": 289,
      "char_count": 563
    },
    {
      "title": "群基础资料",
      "content": "### 群基础资料\n\n群基础资料指的是群组名称、群公告、群介绍、群头像等基础信息。\n\n| 字段 | 含义 | 备注 |\n|------|------|------|\n| GroupId | 群组 ID | 群组的唯一标识，由系统生成或用户指定 |\n| Type | 群组类型 | Work、Public、Meeting、AVChatRoom、Community |\n| Name | 群组名称 | 群组的名称，最长30字节 |\n| Introduction | 群介绍 | 群组的介绍信息，最长400字节 |\n| Notification | 群公告 | 群组的公告信息，最长300字节 |\n| FaceUrl | 群头像URL | 群组的头像URL |\n| Owner_Account | 群主账号 | 群组创建者的账号 |\n| CreateTime | 创建时间 | 群组的创建时间 |\n| InfoSeq | 群资料变更序列号 | 用于群资料变更检测 |\n| LastInfoTime | 最后群资料变更时间 | 群组资料最后变更的时间 |\n| LastMsgTime | 最新消息时间 | 群组最后一条消息的时间 |\n| MemberNum | 当前成员数量 | 群组当前的成员数量 |\n| MaxMemberNum | 最大成员数量 | 群组允许的最大成员数量 |\n| ApplyJoinOption | 申请加群选项 | FreeAccess、NeedPermission、DisableApply |",
      "level": 3,
      "start_line": 161,
      "end_line": 181,
      "word_count": 657,
      "char_count": 1133
    },
    {
      "title": "群成员资料",
      "content": "### 群成员资料\n\n群成员资料指的是群成员的昵称、角色、入群时间等信息。\n\n| 字段 | 含义 | 备注 |\n|------|------|------|\n| Member_Account | 成员账号 | 群成员的账号 |\n| Role | 成员角色 | Owner、Admin、Member |\n| JoinTime | 入群时间 | 成员加入群组的时间 |\n| NameCard | 群名片 | 成员在群组中的名片，最长50字节 |\n| AppMemberDefinedData | 群成员自定义字段 | 成员的自定义数据 |\n| MsgSeq | 成员消息序列号 | 用于标识成员接收消息的序列号 |\n| MsgFlag | 成员消息接收选项 | AcceptAndNotify、AcceptNotNotify、Discard |\n| LastSendMsgTime | 最后发言时间 | 成员最后一次发言的时间 |\n| MuteUntil | 禁言到期时间 | 成员被禁言的到期时间 |",
      "level": 3,
      "start_line": 182,
      "end_line": 197,
      "word_count": 449,
      "char_count": 775
    },
    {
      "title": "权限组资料",
      "content": "### 权限组资料\n\n权限组是社群（Community）特有的功能，用于管理不同成员的权限。\n\n| 字段 | 含义 | 备注 |\n|------|------|------|\n| PermissionGroupId | 权限组 ID | 权限组的唯一标识 |\n| PermissionGroupName | 权限组名称 | 权限组的名称，最长30字节 |\n| Permission | 权限值 | 按位表示的权限值 |\n| CustomData | 权限组自定义数据 | 权限组的自定义字段 |\n\n## 权限组中权限介绍",
      "level": 3,
      "start_line": 198,
      "end_line": 210,
      "word_count": 260,
      "char_count": 460
    },
    {
      "title": "权限组中的权限含义介绍",
      "content": "### 权限组中的权限含义介绍\n\n社群（Community）支持权限组功能，可以对不同的成员设置不同的权限。权限采用按位的方式进行表示，各个权限位的含义如下：\n\n| 权限名称 | 权限含义 | 权限值 |\n|----------|----------|---------|\n| ModifyGroupInfo | 修改群资料权限 | 1<<0 |\n| KickGroupMember | 踢出群成员权限 | 1<<1 |\n| BanGroupMember | 禁言群成员权限 | 1<<2 |\n| GetOnlineMemberNum | 获取群在线成员数权限 | 1<<3 |\n\n## 针对话题的权限介绍\n\n社群（Community）支持话题功能，可以在社群内创建不同的话题进行分层级沟通。针对话题，也支持权限控制：\n\n| 权限名称 | 权限含义 | 权限值 |\n|----------|----------|---------|\n| ManageTopic | 管理话题权限 | 1<<0 |\n| CreateTopic | 创建话题权限 | 1<<1 |\n| SendTopicMessage | 发送话题消息权限 | 1<<2 |\n| GetTopicMessage | 拉取话题消息权限 | 1<<3 |\n| GetJoinTopicHistoryMessage | 拉取入群前的话题历史消息权限 | 1<<4 |\n| RevokeOtherMemberTopicMessage | 撤回他人话题消息权限 | 1<<5 |\n| TopicAtAll | 在话题中发消息时支持@all 的权限 | 1<<6 |\n\n## 自定义群组 ID\n\n默认情况下，App 创建群时，即时通信 IM 会为新创建的群组分配一个默认的群组 ID。该 ID 将以 @TGS# 开头，且保证在 App 中唯一。\n\n为了使得群组 ID 更加简单，便于记忆传播，即时通信 IM 支持 App 在通过 REST API 创建群组时自定义群组 ID。自定义群组 ID 必须为可打印 ASCII 字符（0x20-0x7e），最长48个字节，且前缀不能为 @TGS#（避免与默认分配的群组 ID 混淆）。\n\n**注意：**\n\n社群（Community）前缀必须是@TGS#\\_。\n\n## 自定义话题 ID\n\n默认情况下，App 创建话题时，即时通信 IM 会为新创建的话题分配一个默认的话题 ID。该 ID 将以 `GroupId+@TOPIC#_`开头，且保证在群组内唯一。\n\n为了使得话题 ID 更加简单，便于记忆传播，即时通信 IM 支持 App 在通过 REST API 创建话题时自定义话题 ID。自定义话题 ID 的形式为`GroupId+@TOPIC#_+自定义部分`，其中自定义部分不能包括`@TGS#_和@TOPIC#_@TOPIC#` （避免与默认分配的群组 ID 混淆）, 且必须为可打印 ASCII 字符（`0x20-0x7e`）。\n\n例如 GroupId 为`@TGS#_@TGS#cQVLVHIM62CJ`，自定义部分为`TestTopic`，则最终的自定义话题 ID 为`@TGS#_@TGS#cQVLVHIM62CJ@TOPIC#_TestTopic`。整个自定义话题 ID 长度需要保证在96个字节内。\n\n## 自定义权限组 ID\n\n默认情况下，App 创建权限组时，即时通信 IM 会为新创建的权限组分配一个默认的权限组ID。该 ID 将以 @PMG#\\_@PMG#开头，且保证在群组内唯一。\n\n为了使得权限组 ID 更加简单，便于记忆传播，即时通信 IM 支持 App 在通过 REST API 创建权限组时自定义权限组 ID。自定义权限组 ID 必须以@PMG#\\_开头（但是不能以@PMG#\\_@PMG#开头，避免与默认分配的权限组ID混淆）且为可打印 ASCII 字符（`0x20-0x7e`）。\n\n## 自定义字段\n\n即时通信 IM 支持 App 根据业务需求，在群组和群成员两个维度上设置自定义字段。群组维度最多支持10个字段，群成员维度最多支持5个字段。利用自定义字段，App 可以将一些额外数据附加到群组之上，并可以通过现有接口进行读写操作。",
      "level": 3,
      "start_line": 211,
      "end_line": 263,
      "word_count": 1784,
      "char_count": 3418
    },
    {
      "title": "特性介绍",
      "content": "### 特性介绍\n\n每个自定义字段有以下特性：\n\n- 为 Key-Value 形式。\n- Key 为 String 类型，长度不超过16字节，其命名仅支持英文大小写字母、数字、下划线。\n- Value 为用户自定义 Buffer，可以为二进制数据，群维度的 Value 长度不超过512字节，群成员维度的 Value 长度不超过64字节。如果 Value 是二进制数据，需要转化为可打印纯文本字符流再使用，避免 json 格式不支持二进制数据嵌入等因素，例如可将二进制数据转换为 base64格式。\n- 支持配置每个 Key 的最小读权限、最小写权限。\n\n每个自定义字段的读写权限从高到低分别为：\n\n1. App 管理员可读/可写。\n2. 群主可读/可写。\n3. 群管理员可读/可写。\n4. 群成员可读/可写。\n5. 任何人（包括非成员）可读/可写。\n\n例如，App 需要在群组中扩展一个字段 GroupLevel，其 Value 为一个数字，用于记录该群的等级信息。假设等级信息需要 App 后台计算得出，那么该字段的最小写权限应当为\"App 管理员可写\"。该字段应当为群的公开资料，故而其最小读权限应当为\"任何人（包括非成员）可读\"。\n\n对于 C/C++ 开发者，如果需要存储的 Value 是数字，建议将其存储为数字的字符串形式，而非其二进制形式（例如，当存储的数字是1时，建议存储字符串\"1\"，而非二进制数据 0x01）。对于自定义字段，即时通信 IM 后续会扩展出更多操作方式，例如对 Value 进行特定数学操作等，这些运算未来都会以基于字符串形式表示的数字来进行操作。",
      "level": 3,
      "start_line": 264,
      "end_line": 284,
      "word_count": 691,
      "char_count": 1661
    },
    {
      "title": "配置方法",
      "content": "### 配置方法\n\n这两个维度的自定义字段，都可以通过即时通信 IM 控制台进行配置。配置群成员维度的自定义字段前，需要先指定群组类型。但对于直播群（AVChatRoom）及以其为参考的群组类型，因为不存储所有群成员的资料，所以不支持群成员维度的自定义字段。\n\n\"自己的读写权限\"是指对于用户本人的群成员维度自定义字段值，自己是否有读写权限。例如，群成员维度的自定义字段 \"MemberLevel\"，用于表示成员在群组中的等级，本人可以读取自己的等级，但无权修改自己的等级，因此字段的\"自己的读写权限\"为\"可读/不可写\"。\n\n**注意：**\n\n不支持删除或者修改已配置的自定义字段，请谨慎操作。\n\n## 自定义回调\n\n第三方回调是 App 实现特殊需求的重要方式之一，为用户提供了自定义行为的能力。即时通信 IM 群组系统支持多种回调，具体参见[第三方回调简介](https://cloud.tencent.com/document/product/269/1522)以及[回调命令列表](https://cloud.tencent.com/document/product/269/1523)。\n\n---\n\n© 2025 Tencent Cloud. All Rights Reserved.",
      "level": 3,
      "start_line": 285,
      "end_line": 302,
      "word_count": 547,
      "char_count": 1190
    }
  ]
}