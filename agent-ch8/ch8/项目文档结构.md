# 腾讯云IM文档RAG项目结构

## 📁 项目目录结构

```
ch8/
├── 📂 核心模块/
│   ├── tencent_embeddings.py           # 腾讯云LKE嵌入模型封装
│   ├── document_splitter.py            # 文档分割工具
│   ├── vector_store_manager.py         # 向量数据库管理器
│   ├── real_vector_store.py            # 真实向量数据库实现
│   └── rag_complete_demo.py            # 🆕 完整RAG演示(待创建)
│
├── 📂 网页抓取模块/
│   ├── rag_homework.py                 # 通用URL转Markdown工具
│   └── url_to_markdown_simple.py      # 专用版本
│
├── 📂 测试和演示/
│   ├── test_embedding_api.py           # API测试
│   ├── demo_vector_store.py            # 模拟版演示
│   ├── recall_test.py                  # 召回测试框架
│   └── example_usage.py               # 使用示例
│
├── 📂 配置文件/
│   ├── vector_store_config.json       # 主配置文件
│   └── requirements.txt               # 依赖包列表
│
├── 📂 数据文件/
│   ├── 腾讯云IM群组系统完整文档.md       # 源文档
│   ├── 腾讯云IM文档块.json             # 分割后的文档块
│   ├── rag_ready_chunks.json          # RAG就绪的数据
│   └── tencent.im.db/                 # Chroma向量数据库
│
├── 📂 测试结果/
│   ├── recall_test_results.json       # 召回测试结果
│   ├── real_vector_search_results.json # 搜索结果示例
│   └── vector_store_demo_results.json # 演示结果
│
├── 📂 文档/
│   ├── README.md                      # 项目总文档
│   ├── VECTOR_STORE_README.md         # 向量数据库文档
│   ├── 召回测试报告.md                 # 测试报告
│   └── 项目文档结构.md                 # 本文件
│
└── 📂 环境/
    └── venv/                          # Python虚拟环境
```

## 🔄 RAG工作流程

### 1. 文档获取阶段
```
URL → rag_homework.py → Markdown文档
```

### 2. 文档处理阶段
```
Markdown → document_splitter.py → 文档块 → JSON格式
```

### 3. 向量化存储阶段
```
文档块 → tencent_embeddings.py → 向量 → tencent.im.db (Chroma)
```

### 4. 检索增强阶段
```
用户查询 → 向量搜索 → 相关文档 → 上下文构建 → LLM生成
```

## 📋 文件功能说明

### 核心模块
| 文件名 | 功能 | 状态 |
|--------|------|------|
| `tencent_embeddings.py` | 腾讯云LKE嵌入模型API封装 | ✅ 完成 |
| `document_splitter.py` | 按标题分割Markdown文档 | ✅ 完成 |
| `vector_store_manager.py` | 向量数据库操作封装 | ✅ 完成 |
| `real_vector_store.py` | 完整向量数据库实现 | ✅ 完成 |

### 测试模块
| 文件名 | 功能 | 状态 |
|--------|------|------|
| `test_embedding_api.py` | 测试腾讯云API连接 | ✅ 完成 |
| `recall_test.py` | 召回性能测试框架 | ✅ 完成 |
| `demo_vector_store.py` | 模拟版本演示 | ✅ 完成 |

### 数据文件
| 文件名 | 描述 | 大小 |
|--------|------|------|
| `腾讯云IM群组系统完整文档.md` | 源文档 | 20KB |
| `tencent.im.db/` | 向量数据库 | 40.8MB |
| `rag_ready_chunks.json` | 处理后的文档块 | 27KB |

## 🎯 使用指南

### 快速开始
```bash
# 1. 激活环境
source venv/bin/activate

# 2. 测试API连接
python3 test_embedding_api.py

# 3. 运行召回测试
python3 recall_test.py

# 4. 完整RAG演示
python3 rag_complete_demo.py
```

### 配置要求
1. 配置腾讯云API密钥到 `vector_store_config.json`
2. 确保虚拟环境已安装所有依赖
3. 向量数据库 `tencent.im.db` 已创建

## 📊 性能指标

### 当前测试结果
- **召回准确率**: 93.8%
- **平均响应时间**: 0.366秒
- **测试成功率**: 100%
- **数据库大小**: 40.8MB (12个文档块)

### 优化方向
1. 扩展文档数量
2. 优化查询重写
3. 增加结果排序算法
4. 添加缓存机制

## 🔧 技术栈

- **嵌入模型**: 腾讯云LKE (1024维)
- **向量数据库**: Chroma
- **文档处理**: Langchain + BeautifulSoup
- **API框架**: 腾讯云SDK
- **测试框架**: 自定义召回测试

## 📈 扩展计划

1. **多文档源支持**: 支持更多腾讯云文档
2. **实时更新**: 增量更新文档内容
3. **Web界面**: 创建交互式查询界面
4. **性能监控**: 添加性能监控仪表板